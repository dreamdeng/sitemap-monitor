# Sitemap 监控平台 - 使用手册

## 📖 目录

1. [系统简介](#系统简介)
2. [登录系统](#登录系统)
3. [添加网站](#添加网站)
4. [监控网站](#监控网站)
5. [查看发现](#查看发现)
6. [导出数据](#导出数据)
7. [常见问题](#常见问题)

---

## 系统简介

Sitemap 监控平台是一个用于监控网站 Sitemap 变化并自动发现新内容的工具。

### 核心功能

- 📊 **仪表盘** - 查看整体统计数据
- 🌐 **网站管理** - 添加和管理要监控的网站
- 🔍 **新发现** - 浏览、搜索和管理发现的新内容
- 📤 **数据导出** - 导出发现的内容为 CSV 文件
- ⏰ **自动监控** - 系统每天自动监控两次（上午9点和晚上9点）

---

## 登录系统

### 步骤：

1. 打开浏览器，访问：`http://localhost:3001/login`
2. 输入管理员密码：`sitemap_admin_2024`
3. 点击"登录"按钮
4. 成功后会自动跳转到仪表盘页面

![登录页面示意](登录页面会显示一个简洁的密码输入框)

---

## 添加网站

### 步骤：

1. 点击顶部导航栏的 **"网站管理"**
2. 点击右上角的 **"添加网站"** 按钮
3. 填写表单：
   - **网站名称**：给网站起个容易记住的名字（例如：Poki）
   - **Sitemap URL**：输入网站的 sitemap.xml 地址
     - 示例：`https://poki.com/sitemap.xml`
4. 点击 **"添加网站"** 按钮
5. 系统会显示"网站添加成功！"提示

### 推荐的测试网站：

```
名称：Poki
URL：https://poki.com/sitemap.xml

名称：CrazyGames
URL：https://www.crazygames.com/sitemap.xml

名称：Y8
URL：https://www.y8.com/sitemap.xml
```

### 注意事项：

- ✅ Sitemap URL 必须是完整的网址（以 https:// 开头）
- ✅ URL 必须指向有效的 sitemap.xml 文件
- ⚠️ 每个网站的 sitemap URL 必须是唯一的

---

## 监控网站

系统提供两种监控方式：

### 1. 手动监控（立即执行）

**步骤：**
1. 进入 **"网站管理"** 页面
2. 找到要监控的网站
3. 点击网站右侧的 **"监控"** 按钮
4. 确认对话框中点击 **"确定"**
5. 等待监控完成（会显示"监控已成功启动！"）

**监控过程：**
- 系统会抓取网站的 sitemap.xml
- 解析出所有 URL
- 与上次记录对比，找出新增的 URL
- 访问新 URL 并提取元数据（标题、描述、关键词、H1标签）
- 将新发现保存到数据库

**时长：**
- 取决于网站大小和新 URL 数量
- 一般1-5分钟完成

### 2. 自动监控（定时执行）

系统已配置为每天自动监控两次：
- 上午 9:00 UTC（北京时间下午 5:00）
- 晚上 9:00 UTC（北京时间次日早上 5:00）

**查看自动监控结果：**
- 在仪表盘查看"最后监控运行"卡片
- 显示监控时间、状态和新发现数量

---

## 查看发现

### 步骤：

1. 点击顶部导航栏的 **"新发现"**
2. 查看所有发现的内容列表

### 功能说明：

#### 1. 搜索功能
- 在"搜索"输入框中输入关键词
- 支持搜索：标题、描述、关键词
- 点击"搜索"按钮执行搜索

#### 2. 筛选功能
- **状态筛选**：
  - 全部 - 显示所有发现
  - 未读 - 只显示未读的发现
  - 已读 - 只显示已读的发现

#### 3. 标记已读/未读
- 点击发现右侧的 **"标为已读"** 按钮
- 已读的发现可以点击 **"标为未读"** 恢复

#### 4. 删除发现
- 点击发现右侧的 **"删除"** 按钮
- 确认后永久删除该条记录

#### 5. 访问原链接
- 点击 **"访问链接"** 在新标签页打开原网页

#### 6. 分页浏览
- 使用底部的 **"上一页"** 和 **"下一页"** 按钮
- 每页显示 20 条记录

---

## 导出数据

### 导出为 CSV 文件

**步骤：**

1. 进入 **"新发现"** 页面
2. （可选）使用筛选器筛选要导出的数据
   - 例如：只导出未读的发现
3. 点击右上角的 **"导出 CSV"** 按钮
4. 等待几秒钟
5. 浏览器会自动下载 CSV 文件

**CSV 文件内容：**

文件包含以下列：
- Website（网站名称）
- URL（页面链接）
- Title（页面标题）
- Description（页面描述）
- Keywords（关键词）
- H1（H1 标签内容）
- Is Read（是否已读）
- Found At（发现时间）

**使用场景：**
- 📊 导入到 Excel 进行数据分析
- 📧 发送给团队成员
- 💾 定期备份数据
- 📈 制作报表

---

## 常见问题

### Q1: 监控失败怎么办？

**可能原因：**
- 网站的 sitemap.xml 无法访问
- URL 填写错误
- 网站服务器拒绝访问
- 网络连接问题

**解决方法：**
1. 检查 sitemap URL 是否正确
2. 在浏览器中直接访问 sitemap URL 测试
3. 稍后重试
4. 检查网络连接

### Q2: 为什么没有新发现？

**可能原因：**
- 网站 sitemap 没有更新
- 所有 URL 在上次监控时已记录
- 这是正常现象

**说明：**
- 系统只记录**新增**的 URL
- 如果网站没有新内容，就不会有新发现

### Q3: 如何查看监控历史？

目前在仪表盘的"最后监控运行"卡片中可以查看最近一次的监控结果。

### Q4: 能同时监控多个网站吗？

可以！
- 添加多个网站后，点击任意网站的"监控"按钮单独监控
- 或等待自动监控时，系统会按顺序监控所有激活的网站

### Q5: 导出的 CSV 文件在 Excel 中乱码？

**解决方法：**
1. 用记事本打开 CSV 文件
2. 另存为，编码选择"UTF-8 with BOM"
3. 再用 Excel 打开

或者：
1. 打开 Excel
2. 使用"数据" > "从文本/CSV"导入
3. 选择 UTF-8 编码

### Q6: 可以暂停某个网站的监控吗？

目前可以：
- 删除不需要的网站
- 或暂时不手动触发该网站的监控

### Q7: 数据会保留多久？

- 所有数据永久保存在数据库中
- 可以随时查看历史发现
- 建议定期导出备份重要数据

### Q8: 如何修改登录密码？

编辑 `.env` 文件中的 `ADMIN_PASSWORD` 值，然后重启服务器。

### Q9: 监控频率可以自定义吗？

系统默认每天监控两次。如需修改：
1. 编辑 `vercel.json` 文件
2. 修改 `schedule` 字段（使用 cron 表达式）
3. 重新部署

---

## 💡 使用技巧

### 1. 高效筛选
- 先设置"状态"为"未读"
- 只查看需要处理的新内容
- 处理完后标记为"已读"

### 2. 定期导出
- 每周导出一次数据作为备份
- 可以用于制作周报、月报

### 3. 搜索技巧
- 搜索会匹配标题、描述、关键词
- 可以搜索品牌名、产品名、关键词

### 4. 批量管理
- 通过筛选器找到特定的发现
- 逐个标记已读或删除

---

## 🆘 获取帮助

如果遇到问题：

1. **查看控制台日志**
   - 打开浏览器开发者工具（F12）
   - 查看 Console 标签页的错误信息

2. **检查服务器日志**
   - 查看运行 `npm run dev` 的终端输出

3. **重启服务**
   ```bash
   # 停止服务（Ctrl+C）
   # 重新启动
   npm run dev
   ```

4. **检查数据库连接**
   - 确认 `.env` 文件中的数据库配置正确
   - 测试数据库是否可以连接

---

## 📞 技术支持

**开发服务器：** http://localhost:3001

**默认登录密码：** sitemap_admin_2024

**数据库：** PostgreSQL (124.156.206.90:5432)

---

## 🎯 快速开始检查清单

使用前请确认：

- ✅ 服务器正在运行（`npm run dev`）
- ✅ 可以访问 http://localhost:3001
- ✅ 能够成功登录
- ✅ 数据库连接正常
- ✅ 至少添加了一个测试网站
- ✅ 成功执行过一次手动监控
- ✅ 能看到新发现的内容

---
 

**祝使用愉快！** 
